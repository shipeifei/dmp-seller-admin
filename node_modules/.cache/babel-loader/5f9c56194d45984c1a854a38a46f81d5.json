{"remainingRequest":"/Users/shizhonghua/workspace/sell/node_modules/babel-loader/lib/index.js!/Users/shizhonghua/workspace/sell/src/http/util.js","dependencies":[{"path":"/Users/shizhonghua/workspace/sell/src/http/util.js","mtime":1553649389000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _ from 'lodash'; // 用户未登录时的重定向\n\nexport var isRequireAuthentication = function isRequireAuthentication(response) {\n  if (response.status === 400 && response.body.errorCode === 'INVALID_TOKEN') {\n    return true;\n  }\n\n  return false;\n};\nexport var isSuccess = function isSuccess(response) {\n  if (response.status >= 200 && response.status < 300) {\n    if (response.bodyBlob) {\n      // 返回的是二进制数据，比如是导出Excel\n      return true;\n    }\n\n    return true;\n  }\n\n  return false;\n};\nexport var getError = function getError(response) {\n  var error = new Error(response.body && (response.body.message ? response.body.message : ''));\n  error.response = response;\n  error.body = response.body ? response.body.body : void 0;\n  return error;\n};\nexport var hasErrorWithStatus = function hasErrorWithStatus(errors, statusOrFunc) {\n  if (!_.isEmpty(errors)) {\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = errors[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var error = _step.value;\n\n        if (typeof statusOrFunc === 'function') {\n          if (statusOrFunc(error.response.status)) {\n            return true;\n          }\n        } else if (error.response.status === statusOrFunc) {\n          return true;\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  }\n\n  return false;\n};",{"version":3,"sources":["/Users/shizhonghua/workspace/sell/src/http/util.js"],"names":["_","isRequireAuthentication","response","status","body","errorCode","isSuccess","bodyBlob","getError","error","Error","message","hasErrorWithStatus","errors","statusOrFunc","isEmpty"],"mappings":";;;AAAA,OAAOA,CAAP,MAAc,QAAd,C,CAEA;;AACA,OAAO,IAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAAC,QAAQ,EAAI;AACjD,MAAIA,QAAQ,CAACC,MAAT,KAAoB,GAApB,IAA2BD,QAAQ,CAACE,IAAT,CAAcC,SAAd,KAA4B,eAA3D,EAA4E;AAC1E,WAAO,IAAP;AACD;;AACD,SAAO,KAAP;AACD,CALM;AAOP,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAAAJ,QAAQ,EAAI;AACnC,MAAIA,QAAQ,CAACC,MAAT,IAAmB,GAAnB,IAA0BD,QAAQ,CAACC,MAAT,GAAkB,GAAhD,EAAqD;AACnD,QAAID,QAAQ,CAACK,QAAb,EAAuB;AACrB;AACA,aAAO,IAAP;AACD;;AACD,WAAO,IAAP;AACD;;AACD,SAAO,KAAP;AACD,CATM;AAWP,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAAN,QAAQ,EAAI;AAClC,MAAIO,KAAK,GAAG,IAAIC,KAAJ,CAAUR,QAAQ,CAACE,IAAT,KAAkBF,QAAQ,CAACE,IAAT,CAAcO,OAAd,GAAwBT,QAAQ,CAACE,IAAT,CAAcO,OAAtC,GAAgD,EAAlE,CAAV,CAAZ;AAEAF,EAAAA,KAAK,CAACP,QAAN,GAAiBA,QAAjB;AACAO,EAAAA,KAAK,CAACL,IAAN,GAAaF,QAAQ,CAACE,IAAT,GAAgBF,QAAQ,CAACE,IAAT,CAAcA,IAA9B,GAAqC,KAAK,CAAvD;AACA,SAAOK,KAAP;AACD,CANM;AAQP,OAAO,IAAMG,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,MAAD,EAASC,YAAT,EAA0B;AAC1D,MAAI,CAACd,CAAC,CAACe,OAAF,CAAUF,MAAV,CAAL,EAAwB;AAAA;AAAA;AAAA;;AAAA;AACtB,2BAAkBA,MAAlB,8HAA0B;AAAA,YAAjBJ,KAAiB;;AACxB,YAAI,OAAOK,YAAP,KAAwB,UAA5B,EAAwC;AACtC,cAAIA,YAAY,CAACL,KAAK,CAACP,QAAN,CAAeC,MAAhB,CAAhB,EAAyC;AACvC,mBAAO,IAAP;AACD;AACF,SAJD,MAIO,IAAIM,KAAK,CAACP,QAAN,CAAeC,MAAf,KAA0BW,YAA9B,EAA4C;AACjD,iBAAO,IAAP;AACD;AACF;AATqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUvB;;AAED,SAAO,KAAP;AACD,CAdM","sourcesContent":["import _ from 'lodash'\n\n// 用户未登录时的重定向\nexport const isRequireAuthentication = response => {\n  if (response.status === 400 && response.body.errorCode === 'INVALID_TOKEN') {\n    return true\n  }\n  return false\n}\n\nexport const isSuccess = response => {\n  if (response.status >= 200 && response.status < 300) {\n    if (response.bodyBlob) {\n      // 返回的是二进制数据，比如是导出Excel\n      return true\n    }\n    return true\n  }\n  return false\n}\n\nexport const getError = response => {\n  let error = new Error(response.body && (response.body.message ? response.body.message : ''))\n\n  error.response = response\n  error.body = response.body ? response.body.body : void 0\n  return error\n}\n\nexport const hasErrorWithStatus = (errors, statusOrFunc) => {\n  if (!_.isEmpty(errors)) {\n    for (let error of errors) {\n      if (typeof statusOrFunc === 'function') {\n        if (statusOrFunc(error.response.status)) {\n          return true\n        }\n      } else if (error.response.status === statusOrFunc) {\n        return true\n      }\n    }\n  }\n\n  return false\n}\n"]}]}