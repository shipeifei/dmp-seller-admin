{"remainingRequest":"/Users/shizhonghua/workspace/sell/node_modules/babel-loader/lib/index.js!/Users/shizhonghua/workspace/sell/src/store/modules/appController.js","dependencies":[{"path":"/Users/shizhonghua/workspace/sell/src/store/modules/appController.js","mtime":1553650571000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.starts-with\";\nvar state = {\n  'serverLoading': false,\n  'clientLoading': false,\n  'loading': false,\n  'requestErrors': [],\n  'weather': {},\n  'secondMenus': [],\n  'showDataMsg': '' // getters\n\n};\nvar getters = {\n  'serverLoading': function serverLoading(state) {\n    return state.serverLoading;\n  },\n  'clientLoading': function clientLoading(state) {\n    return state.clientLoading;\n  },\n  'loading': function loading(state) {\n    return state.serverLoading || state.clientLoading;\n  },\n  'requestErrors': function requestErrors(state) {\n    return state.requestErrors;\n  },\n  'weather': function weather(state) {\n    return state.weather;\n  },\n  'secondMenus': function secondMenus(state) {\n    return state.secondMenus;\n  }\n};\nvar serverLoadingTimeoutId = null;\nvar IGNORE_LOADING_URLS = []; // actions\n\nvar actions = {\n  setSecondMenu: function setSecondMenu(_ref, subMenu) {\n    var commit = _ref.commit;\n    commit('setSecondMenu', subMenu);\n  },\n  beforeRequest: function beforeRequest(_ref2, request) {\n    var dispatch = _ref2.dispatch,\n        commit = _ref2.commit;\n    commit('requestError', []); // 部分请求不需要显示loading状态\n\n    var ignoreLoading = false;\n\n    for (var _i = 0, _IGNORE_LOADING_URLS = IGNORE_LOADING_URLS; _i < _IGNORE_LOADING_URLS.length; _i++) {\n      var url = _IGNORE_LOADING_URLS[_i];\n\n      if (request.url.startsWith(url)) {\n        ignoreLoading = true;\n        break;\n      }\n    }\n\n    if (!ignoreLoading) {\n      dispatch('setServerLoading', true);\n    }\n  },\n  afterRequestSuccess: function afterRequestSuccess(_ref3) {\n    var dispatch = _ref3.dispatch;\n    dispatch('setServerLoading', false);\n  },\n  afterRequestFailed: function afterRequestFailed(_ref4, requestErrors) {\n    var dispatch = _ref4.dispatch,\n        commit = _ref4.commit;\n    commit('requestError', requestErrors);\n    dispatch('setServerLoading', false);\n  },\n  setServerLoading: function setServerLoading(_ref5, loading) {\n    var commit = _ref5.commit;\n\n    if (!loading) {\n      if (serverLoadingTimeoutId) {\n        clearTimeout(serverLoadingTimeoutId);\n        serverLoadingTimeoutId = null;\n      }\n\n      commit('setServerLoading', loading);\n    } else if (!serverLoadingTimeoutId) {\n      // 延迟1500毫秒再显示加载状态，这样可以在页面加载很快时不显示加载状态，视觉上效果要稍微好些\n      serverLoadingTimeoutId = setTimeout(function () {\n        commit('setServerLoading', loading);\n      }, 1500);\n    }\n  },\n  setClientLoading: function setClientLoading(_ref6, loading) {\n    var commit = _ref6.commit;\n    commit('setClientLoading', loading);\n  }\n};\nvar mutations = {\n  setSecondMenu: function setSecondMenu(state, subMenu) {\n    state.secondMenus = subMenu;\n  },\n  setServerLoading: function setServerLoading(state, loading) {\n    state.serverLoading = loading;\n  },\n  setClientLoading: function setClientLoading(state, loading) {\n    state.clientLoading = loading;\n  },\n  requestError: function requestError(state, requestErrors) {\n    state.requestErrors = requestErrors;\n  },\n  setWeather: function setWeather(state, weather) {\n    state.weather = weather;\n  }\n};\nexport default {\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};",{"version":3,"sources":["/Users/shizhonghua/workspace/sell/src/store/modules/appController.js"],"names":["state","getters","serverLoading","clientLoading","requestErrors","weather","secondMenus","serverLoadingTimeoutId","IGNORE_LOADING_URLS","actions","setSecondMenu","subMenu","commit","beforeRequest","request","dispatch","ignoreLoading","url","startsWith","afterRequestSuccess","afterRequestFailed","setServerLoading","loading","clearTimeout","setTimeout","setClientLoading","mutations","requestError","setWeather"],"mappings":"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","sourcesContent":["const state = {\n  'serverLoading': false,\n  'clientLoading': false,\n  'loading': false,\n  'requestErrors': [],\n  'weather': {},\n  'secondMenus': [],\n  'showDataMsg': ''\n}\n\n// getters\nconst getters = {\n  'serverLoading': state => state.serverLoading,\n  'clientLoading': state => state.clientLoading,\n  'loading': state => state.serverLoading || state.clientLoading,\n  'requestErrors': state => state.requestErrors,\n  'weather': state => state.weather,\n  'secondMenus': state => state.secondMenus\n}\n\nlet serverLoadingTimeoutId = null\nconst IGNORE_LOADING_URLS = []\n\n// actions\nconst actions = {\n  setSecondMenu ({\n    commit\n  }, subMenu) {\n    commit('setSecondMenu', subMenu)\n  },\n  beforeRequest ({\n    dispatch,\n    commit\n  }, request) {\n    commit('requestError', [])\n    // 部分请求不需要显示loading状态\n    let ignoreLoading = false\n    for (let url of IGNORE_LOADING_URLS) {\n      if (request.url.startsWith(url)) {\n        ignoreLoading = true\n        break\n      }\n    }\n\n    if (!ignoreLoading) {\n      dispatch('setServerLoading', true)\n    }\n  },\n  afterRequestSuccess ({\n    dispatch\n  }) {\n    dispatch('setServerLoading', false)\n  },\n  afterRequestFailed ({\n    dispatch,\n    commit\n  }, requestErrors) {\n    commit('requestError', requestErrors)\n    dispatch('setServerLoading', false)\n  },\n  setServerLoading ({\n    commit\n  }, loading) {\n    if (!loading) {\n      if (serverLoadingTimeoutId) {\n        clearTimeout(serverLoadingTimeoutId)\n        serverLoadingTimeoutId = null\n      }\n      commit('setServerLoading', loading)\n    } else if (!serverLoadingTimeoutId) {\n      // 延迟1500毫秒再显示加载状态，这样可以在页面加载很快时不显示加载状态，视觉上效果要稍微好些\n      serverLoadingTimeoutId = setTimeout(() => {\n        commit('setServerLoading', loading)\n      }, 1500)\n    }\n  },\n  setClientLoading ({\n    commit\n  }, loading) {\n    commit('setClientLoading', loading)\n  }\n}\n\nconst mutations = {\n  setSecondMenu (state, subMenu) {\n    state.secondMenus = subMenu\n  },\n  setServerLoading (state, loading) {\n    state.serverLoading = loading\n  },\n  setClientLoading (state, loading) {\n    state.clientLoading = loading\n  },\n  requestError (state, requestErrors) {\n    state.requestErrors = requestErrors\n  },\n  setWeather (state, weather) {\n    state.weather = weather\n  }\n}\n\nexport default {\n  state,\n  getters,\n  actions,\n  mutations\n}\n"]}]}