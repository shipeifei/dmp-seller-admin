{"remainingRequest":"/Users/shizhonghua/workspace/sell/node_modules/babel-loader/lib/index.js!/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/shizhonghua/workspace/sell/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shizhonghua/workspace/sell/src/views/realTime/user/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shizhonghua/workspace/sell/src/views/realTime/user/index.vue","mtime":1561515190000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.is-array\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport userDetail from \"./userDetail\";\nimport search from \"./search\";\nimport tagSelect from \"./tagSelect\";\nimport { userPortraitData, userLabelData } from '@/http/api/realTimeApi';\n\nvar deepFind = function deepFind(arr, condition, children) {\n  var main = null;\n\n  try {\n    (function poll(arr, level) {\n      if (!Array.isArray(arr)) return;\n\n      for (var i = 0; i < arr.length; i++) {\n        var item = arr[i];\n        var isFind = condition && condition(item, i, level) || false;\n\n        if (isFind) {\n          main = item;\n          throw Error;\n        } else if (children && item[children] && item[children].length) {\n          poll(item[children], level + 1);\n        } else if (i === arr.length - 1) {\n          main = {};\n        }\n      }\n    })(arr, 0);\n  } catch (err) {}\n\n  return main;\n};\n\nexport default {\n  components: {\n    userDetail: userDetail,\n    search: search,\n    tagSelect: tagSelect\n  },\n  data: function data() {\n    return {\n      showResult: false,\n      keywords: '',\n      isDisabled: false,\n      selectLabels: [],\n      userProfileResult: {},\n      userInfo: {}\n    };\n  },\n  methods: {\n    searchInput: function searchInput(val) {\n      var _this = this;\n\n      if (val === '') {\n        this.keywords = '';\n        return;\n      }\n\n      userPortraitData(val).then(function (result) {\n        if (result.length === 0) {\n          _this.$message.error(_this.$t('UserDoes'));\n\n          return;\n        }\n\n        _this.keywords = val;\n        _this.userPortraitData = result;\n      }).catch(function (res) {\n        _this.$message.error(res);\n      });\n      this.showResult = false;\n    },\n    tagAdd: function tagAdd(val) {\n      this.selectLabels = val;\n    },\n    findFiveLevelLabelId: function findFiveLevelLabelId(labelId) {\n      var result = deepFind(this.userPortraitData, function (item) {\n        return item.labelId === labelId;\n      }, 'children');\n      return result && result.labelValueId ? result.labelValueId : '';\n    },\n    output: function output() {\n      var _this2 = this;\n\n      if (!this.keywords) {\n        this.$message.error(this.$t('PleaseUserInformation'));\n        return false;\n      }\n\n      var nolabelIdArr = [];\n      this.selectLabels.forEach(function (item) {\n        var labelId = _this2.findFiveLevelLabelId(item.labelId);\n\n        if (!labelId) {\n          nolabelIdArr.push(item.value);\n        }\n\n        item.labelValueId = labelId;\n      });\n\n      if (this.selectLabels.length === 0) {\n        this.$message.error(this.$t('PleaseLabelOptions'));\n        return false;\n      }\n\n      if (nolabelIdArr.length > 0) {\n        this.$message.error(\"\".concat(this.$t('userLabel'), \":[\").concat(nolabelIdArr.join('、'), \"]\"));\n        return false;\n      }\n\n      this.isDisabled = true;\n      this.$http.get('https://api.motouat.com.cn/cn/gucpApi/getUserInfo?paramId=' + this.keywords).then(function (data) {\n        _this2.userInfo = data.body;\n      });\n      userLabelData(JSON.stringify(this.selectLabels)).then(function (data) {\n        _this2.showResult = true;\n        _this2.userProfileResult = data;\n      }).finally(function (res) {\n        _this2.isDisabled = false;\n      });\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"user-container\">\n    <div class=\"search-outside-wrap\">\n      <el-card class=\"search-wrapper\">\n        <el-row :gutter=\"20\">\n          <el-col :span=\"12\">\n            <search @search-input=\"searchInput\" />\n          </el-col>\n          <el-col :span=\"12\">\n            <tag-select @add=\"tagAdd\" />\n          </el-col>\n        </el-row>\n      </el-card>\n      <div class=\"search-input\">\n        <el-button\n          :disabled=\"isDisabled\"\n          circle\n          @click=\"output\"\n          icon=\"el-icon-plus\"\n        />\n      </div>\n    </div>\n    <div v-if=\"showResult\" class=\"result-continer\">\n      <user-detail\n        :user-profile-result=\"userProfileResult\"\n        :user-info=\"userInfo\"\n      />\n    </div>\n  </div>\n</template>\n<script>\nimport userDetail from './userDetail'\nimport search from './search'\nimport tagSelect from './tagSelect'\nimport { userPortraitData, userLabelData } from '@/http/api/realTimeApi'\nconst deepFind = (arr, condition, children) => {\n  let main = null\n  try {\n    (function poll (arr, level) {\n      if (!Array.isArray(arr)) return\n      for (let i = 0; i < arr.length; i++) {\n        const item = arr[i]\n        const isFind = (condition && condition(item, i, level)) || false\n        if (isFind) {\n          main = item\n          throw Error\n        } else if (children && item[children] && item[children].length) {\n          poll(item[children], level + 1)\n        } else if (i === arr.length - 1) {\n          main = {}\n        }\n      }\n    })(arr, 0)\n  } catch (err) {}\n  return main\n}\nexport default {\n  components: {\n    userDetail,\n    search,\n    tagSelect\n  },\n  data () {\n    return {\n      showResult: false,\n      keywords: '',\n      isDisabled: false,\n      selectLabels: [],\n      userProfileResult: {},\n      userInfo: {}\n    }\n  },\n  methods: {\n    searchInput (val) {\n      if (val === '') {\n        this.keywords = ''\n        return\n      }\n      userPortraitData(val)\n        .then(result => {\n          if (result.length === 0) {\n            this.$message.error(this.$t('UserDoes'))\n            return\n          }\n          this.keywords = val\n          this.userPortraitData = result\n        })\n        .catch(res => {\n          this.$message.error(res)\n        })\n      this.showResult = false\n    },\n    tagAdd (val) {\n      this.selectLabels = val\n    },\n    findFiveLevelLabelId (labelId) {\n      let result = deepFind(\n        this.userPortraitData,\n        item => item.labelId === labelId,\n        'children'\n      )\n      return result && result.labelValueId ? result.labelValueId : ''\n    },\n    output () {\n      if (!this.keywords) {\n        this.$message.error(this.$t('PleaseUserInformation'))\n        return false\n      }\n      let nolabelIdArr = []\n      this.selectLabels.forEach(item => {\n        let labelId = this.findFiveLevelLabelId(item.labelId)\n        if (!labelId) {\n          nolabelIdArr.push(item.value)\n        }\n\n        item.labelValueId = labelId\n      })\n      if (this.selectLabels.length === 0) {\n        this.$message.error(this.$t('PleaseLabelOptions'))\n        return false\n      }\n      if (nolabelIdArr.length > 0) {\n        this.$message.error(\n          `${this.$t('userLabel')}:[${nolabelIdArr.join('、')}]`\n        )\n        return false\n      }\n\n      this.isDisabled = true\n      this.$http\n        .get(\n          'https://api.motouat.com.cn/cn/gucpApi/getUserInfo?paramId=' +\n            this.keywords\n        )\n        .then(data => {\n          this.userInfo = data.body\n        })\n      userLabelData(JSON.stringify(this.selectLabels))\n        .then(data => {\n          this.showResult = true\n          this.userProfileResult = data\n        })\n        .finally(res => {\n          this.isDisabled = false\n        })\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n@import \"../../../assets/less/variables.less\";\n\n.message-tips {\n  margin-top: 0;\n  margin-bottom: 20px;\n}\n\n.result-continer {\n  margin-top: 35px;\n}\n\n.el-select .el-input {\n  width: 130px;\n}\n\n.input-with-select .el-input-group__prepend {\n  background-color: #fff;\n}\n\n.select-label {\n  width: 95%;\n  margin-top: 20px;\n  overflow: hidden;\n\n  .select-label-title {\n    width: 50px;\n    float: left;\n  }\n\n  .select-label-content {\n    margin-bottom: 6px;\n    margin-left: 6px;\n    float: left;\n    width: auto;\n    border: 1px solid rgb(180, 180, 174);\n    padding: 0 10px;\n    border-radius: 10px;\n    background: #fff;\n  }\n\n  .actives {\n    background: #f4f8f9;\n    border: 1px solid #c0c4cc;\n  }\n\n  span {\n    display: inline-block;\n    text-align: center;\n  }\n\n  .active {\n    color: #c0c4cc;\n  }\n\n  .remove {\n    display: inline-block;\n    padding: 0 6px 0 10px;\n    cursor: pointer;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/realTime/user"}]}