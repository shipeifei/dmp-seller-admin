{"remainingRequest":"/Users/shizhonghua/workspace/sell/node_modules/babel-loader/lib/index.js!/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/shizhonghua/workspace/sell/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shizhonghua/workspace/sell/src/views/chart/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shizhonghua/workspace/sell/src/views/chart/index.vue","mtime":1561447628000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _slicedToArray from \"/Users/shizhonghua/workspace/sell/node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.date.now\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport chartLine from \"./chartsView/lineMarker\";\nimport Tab from '@/components/Tab';\nimport TableList from '@/components/TableList';\nimport { getDay } from '@/utils/getReccentDate';\nimport { getAllChartPlatform, getScenarioByPlatformId } from '@/http/api/platformApi';\nimport { getClickRateUserConditions, getClickRateNumberConditions, getgetStrategyByScenario, getChartListConditions } from '@/http/api/chartApi';\nimport { localStorageApi, sessionStorageApi } from '@/utils/storageApi';\nexport default {\n  name: 'Feedback',\n  components: {\n    chartLine: chartLine,\n    Tab: Tab,\n    TableList: TableList\n  },\n  data: function data() {\n    var that = this;\n    return {\n      token: sessionStorageApi.get('token'),\n      platformArr: [],\n      platformDesc: '全部',\n      profileArr: [],\n      profileScenarioName: '全部',\n      StrategyArr: [],\n      StrategyName: '全部',\n      positionArr: [],\n      position: '全部',\n      createForm: {\n        platformId: '',\n        profileId: '',\n        localDate: '',\n        strategy: '',\n        position: '',\n        token: sessionStorageApi.get('token')\n      },\n      typesMap: {\n        clickRateUser: this.$t('clickUV'),\n        conversionRate: this.$t('conversionRateUV'),\n        orderRate: this.$t('conversionNumberUV')\n      },\n      typesMap1: {\n        clickRateNumber: this.$t('clickPV'),\n        conversionNumber: this.$t('conversionRatePV'),\n        orderRateNumber: this.$t('conversionNumberPV')\n      },\n      clickRateByUserConditions: {},\n      clickRateByTimesConditions: {},\n      tablesSourceArr: [],\n      sourcedata: [{\n        lable: 'ClickDataStatistics',\n        name: 'first'\n      }, {\n        lable: 'OrderStatistics',\n        name: 'second'\n      }],\n      showtableList: 'first',\n      tableData: [],\n      echartConfig: {\n        itemLineStyleColor: '#409eff',\n        bar1Background: '#5762bf',\n        bar2Background: '#ae9aed'\n      },\n      pickerOptions: {\n        disabledDate: function disabledDate(time) {\n          return time > Date.now() - 3600 * 1000 * 24;\n        },\n        shortcuts: [{\n          text: that.$t('lastWeek'),\n          onClick: function onClick(picker) {\n            var end = new Date(new Date() - 3600 * 1000 * 24);\n            var start = new Date();\n            start.setTime(end - 3600 * 1000 * 24 * 6);\n            picker.$emit('pick', [start, end]);\n          }\n        }, {\n          text: that.$t('lastMonth'),\n          onClick: function onClick(picker) {\n            var end = new Date(new Date() - 3600 * 1000 * 24);\n            var start = new Date();\n            start.setTime(start - 3600 * 1000 * 24 * 29);\n            picker.$emit('pick', [start, end]);\n          }\n        }, {\n          text: that.$t('lastThreeMonth'),\n          onClick: function onClick(picker) {\n            var end = new Date(new Date() - 3600 * 1000 * 24 * 1);\n            var start = new Date();\n            start.setTime(start - 3600 * 1000 * 24 * 89);\n            picker.$emit('pick', [start, end]);\n          }\n        }]\n      },\n      clickRateUser: '',\n      clickRateNumber: ''\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.createForm.localDate = [getDay(-7), getDay(-1)];\n    getAllChartPlatform(this.token).then(function (res) {\n      _this.platformArr = res;\n    });\n    this.getChart();\n    localStorageApi.set('platformDesc', '全部');\n    localStorageApi.set('chartProfileId', '全部');\n    localStorageApi.set('StrategyName', '全部');\n    localStorageApi.set('position', '全部');\n  },\n  methods: {\n    getEchartsTitle: function getEchartsTitle(title) {\n      if (title.clickRateUser) {\n        this.clickRateUser = title.clickRateUser;\n      }\n\n      if (title.clickRateNumber) {\n        this.clickRateNumber = title.clickRateNumber;\n      }\n    },\n    platformIdChange: function platformIdChange(id) {\n      var _this2 = this;\n\n      if (id === '') {\n        localStorageApi.set('platformDesc', '全部');\n        localStorageApi.set('chartProfileId', '全部');\n        localStorageApi.set('StrategyName', '全部');\n        localStorageApi.set('position', '全部');\n        this.profileArr = '';\n        this.StrategyArr = '';\n        this.positionArr = '';\n        this.createForm.profileId = '';\n        this.createForm.strategy = '';\n        this.createForm.position = '';\n        return;\n      }\n\n      this.createForm.profileId = '';\n      this.createForm.strategy = '';\n      this.createForm.position = '';\n      this.profileIdChange('');\n      var obj = {};\n      obj = this.platformArr.find(function (item) {\n        return item.id === id; // 筛选出匹配数据\n      });\n      localStorageApi.set('platformDesc', obj.platformDesc);\n      localStorageApi.set('chartProfileId', '全部');\n      getScenarioByPlatformId(id).then(function (res) {\n        _this2.profileArr = res;\n      });\n      this.getStrategy();\n    },\n    profileIdChange: function profileIdChange(id) {\n      localStorageApi.set('chartProfileId', id);\n\n      if (id === '') {\n        localStorageApi.set('chartProfileId', '全部');\n        this.StrategyArr = '';\n        this.positionArr = '';\n      }\n\n      this.createForm.strategy = '';\n      this.createForm.position = '';\n      localStorageApi.set('StrategyName', '全部');\n      localStorageApi.set('position', '全部');\n      this.getStrategy();\n    },\n    getStrategy: function getStrategy() {\n      var _this3 = this;\n\n      // 推荐位\n      var id = localStorageApi.get('chartPlatformId') || this.createForm.platformId;\n      var name = localStorageApi.get('chartProfileId') || this.createForm.profileId;\n      getgetStrategyByScenario({\n        id: id,\n        name: name\n      }).then(function (res) {\n        if (res.length > 0) {\n          _this3.StrategyArr = res;\n        }\n      });\n    },\n    strategyChange: function strategyChange(strategy) {\n      localStorageApi.set('StrategyName', strategy);\n      this.createForm.position = '';\n\n      if (!strategy) {\n        this.positionArr = '';\n        localStorageApi.set('StrategyName', '全部');\n        localStorageApi.set('position', '全部');\n        return false;\n      }\n\n      var obj = {};\n      obj = this.StrategyArr.find(function (item) {\n        return item.strategy === strategy; // 筛选出匹配数据\n      });\n      this.positionArr = obj.position;\n    },\n    positionChange: function positionChange(position) {\n      localStorageApi.set('position', position);\n\n      if (position === 0) {\n        localStorageApi.set('position', position);\n      }\n\n      if (position === '') {\n        localStorageApi.set('position', '全部');\n      }\n    },\n    getChart: function getChart() {\n      var _this4 = this;\n\n      var _this$createForm = this.createForm,\n          _this$createForm$loca = _slicedToArray(_this$createForm.localDate, 2),\n          startDate = _this$createForm$loca[0],\n          endDate = _this$createForm$loca[1],\n          typeName = _this$createForm.profileId,\n          platId = _this$createForm.platformId,\n          position = _this$createForm.position,\n          token = _this$createForm.token;\n\n      getClickRateUserConditions({\n        startDate: startDate,\n        endDate: endDate,\n        typeName: typeName,\n        platId: platId,\n        position: position,\n        token: token\n      }).then(function (res) {\n        _this4.clickRateByUserConditions = res;\n      }).catch(function (res) {\n        _this4.$message.error(res);\n      });\n      getClickRateNumberConditions({\n        startDate: startDate,\n        endDate: endDate,\n        typeName: typeName,\n        platId: platId,\n        position: position,\n        token: token\n      }).then(function (res) {\n        _this4.clickRateByTimesConditions = res;\n      }).catch(function (res) {\n        _this4.$message.error(res);\n      });\n      getChartListConditions({\n        startDate: startDate,\n        endDate: endDate,\n        typeName: typeName,\n        platId: platId,\n        token: token\n      }).then(function (res) {\n        _this4.tableData = res;\n        _this4.tablesSourceArr = res;\n      }).catch(function (res) {\n        _this4.$message.error(res);\n      });\n    },\n    onSubmit: function onSubmit(formName) {\n      var _this5 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          if (!_this5.createForm.localDate) {\n            _this5.$message.error(_this5.$t('PleaseSelectDate'));\n\n            return false;\n          }\n\n          _this5.platformDesc = localStorageApi.get('platformDesc');\n          _this5.profileScenarioName = localStorageApi.get('chartProfileId');\n          _this5.StrategyName = localStorageApi.get('StrategyName');\n          _this5.position = localStorageApi.get('position');\n\n          _this5.getChart();\n        }\n      });\n    },\n    getTabInfo: function getTabInfo(data) {\n      this.TabInfo = data.name;\n\n      switch (data.name) {\n        case 'first':\n          this.showtableList = data.name;\n          break;\n\n        case 'second':\n          this.showtableList = data.name;\n          break;\n\n        default:\n          this.showtableList = 'first';\n      }\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"chart_form_seletc\">\n        <el-form ref=\"createForm\" :model=\"createForm\" :inline=\"true\" label-suffix=\":\" class=\"search-box\">\n            <el-row>\n                <el-col :span=\"24\">\n                    <p class=\"form_title\">{{$t('querycriteria')}}</p>\n                </el-col>\n            </el-row>\n            <el-row>\n                <el-col class=\"col\" :span=\"3\">\n                    <el-form-item :label=\"$t('recommandation')\" prop=\"platformId\">\n                        <el-select v-model=\"createForm.platformId\" :placeholder=\"$t('pleaseChoose')\" @change=\"platformIdChange\">\n                            <el-option :label=\"'全部'\" :value=\"''\" />\n                            <el-option v-for=\"item in platformArr\" :key=\"item.id\" :label=\"item.platformDesc\" :value=\"item.id\" />\n                        </el-select>\n                    </el-form-item>\n                </el-col>\n                <el-col class=\"col\" :span=\"3\">\n                    <el-form-item :label=\"$t('recommandScenario')\" prop=\"profileId\">\n                        <el-select v-model=\"createForm.profileId\" product @change=\"profileIdChange\">\n                            <el-option :label=\"'全部'\" :value=\"''\" />\n                            <el-option v-for=\"item in profileArr\" :key=\"item.id\" :label=\"item.scenarioName\" :value=\"item.scenarioName\" />\n                        </el-select>\n                    </el-form-item>\n                </el-col>\n                <el-col class=\"col\" :span=\"3\">\n                    <el-form-item :label=\"$t('recommandStrategy')\" prop=\"strategy\">\n                        <el-select v-model=\"createForm.strategy\" :placeholder=\"$t('pleaseChoose')\" @change=\"strategyChange\">\n                            <el-option :label=\"'全部'\" :value=\"''\" />\n                            <el-option v-for=\"item in StrategyArr\" :key=\"item.strategy\" :label=\"item.strategy\" :value=\"item.strategy\" />\n                        </el-select>\n                    </el-form-item>\n                </el-col>\n                <el-col class=\"col\" :span=\"3\">\n                    <el-form-item :label=\"$t('recommandA')\" prop=\"position\">\n                        <el-select v-model=\"createForm.position\" :placeholder=\"$t('pleaseChoose')\" @change=\"positionChange\">\n                            <el-option :label=\"'全部'\" :value=\"''\" />\n                            <el-option v-for=\"item in positionArr\" :key=\"item\" :label=\"item\" :value=\"item\" />\n                        </el-select>\n                    </el-form-item>\n                </el-col>\n                <el-col class=\"col\" :span=\"8\">\n                    <el-form-item :label=\"$t('date')\" prop=\"localDate\">\n                        <el-date-picker class=\"el_date\" v-model=\"createForm.localDate\" :picker-options=\"pickerOptions\" :range-separator=\"$t('to')\" :start-placeholder=\"$t('startDate')\" :end-placeholder=\"$t('endDate')\" type=\"daterange\" value-format=\"yyyy-MM-dd\" />\n                    </el-form-item>\n                </el-col>\n                <el-col class=\"col\" :span=\"4\">\n                    <el-form-item>\n                        <el-button type=\"primary\" size=\"small\" @click=\"onSubmit('createForm')\">{{ $t(\"query\") }}</el-button>\n                    </el-form-item>\n                </el-col>\n            </el-row>\n        </el-form>\n        <div class=\"content\">\n            <div class=\"contentBottom\">\n                <div class=\"left\">\n                    <div slot=\"header\" class=\"searchResult\">\n                        <p class=\"result_title\">{{$t('queryresults')}}</p>\n                        <p>\n                            <span>\n                                <b>{{$t('recommandation')}}:</b>\n                                {{platformDesc}}\n                            </span>\n                            <span>\n                                <b>{{$t('recommandScenario')}}:</b>\n                                {{profileScenarioName}}\n                            </span>\n                        </p>\n                        <p>\n                            <span>\n                                <b>{{$t('recommandStrategy')}}:</b>\n                                {{StrategyName}}\n                            </span>\n                            <span>\n                                <b>{{$t('recommandA')}}:</b>\n                                {{position}}\n                            </span>\n                        </p>\n                    </div>\n                    <div class=\"charts\">\n                        <div class=\"chartLine\">\n                            <div class=\"chartData\">\n                                <!-- <div class=\"echartsTitle\">\n                                  <p>Click through rate - By user</p>\n                                  <p>{{clickRateUser}}</p>\n                                </div> -->\n                                <chart-line @sendEchartsTitle=\"getEchartsTitle\" class=\"echarts\" id=\"chart3\" :data=\"clickRateByUserConditions\" :echartConfig=\"echartConfig\" />\n                            </div>\n                            <div class=\"chartData\">\n                              <!-- <div class=\"echartsTitle\">\n                                <p>Click through rate - Number of times</p>\n                                <p>{{clickRateNumber}}</p>\n                              </div> -->\n                                <chart-line @sendEchartsTitle=\"getEchartsTitle\" class=\"echarts\" id=\"chart4\" :data=\"clickRateByTimesConditions\" :echartConfig=\"echartConfig\" :types-map=\"typesMap1\" />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"right\">\n                  <div class=\"rightHeader\">\n                    <p class=\"tableTitle\">{{$t('StatisticalListofData')}}</p>\n                    <Tab :sourcedata=\"sourcedata\" class=\"change_tabs\" @listenToTab=\"getTabInfo\"></Tab>\n                  </div>\n                    <TableList :tableData=\"tableData\" :showwhich=\"showtableList\" class=\"table_list\"></TableList>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport chartLine from './chartsView/lineMarker'\nimport Tab from '@/components/Tab'\nimport TableList from '@/components/TableList'\nimport { getDay } from '@/utils/getReccentDate'\nimport {\n  getAllChartPlatform,\n  getScenarioByPlatformId\n} from '@/http/api/platformApi'\nimport {\n  getClickRateUserConditions,\n  getClickRateNumberConditions,\n  getgetStrategyByScenario,\n  getChartListConditions\n} from '@/http/api/chartApi'\nimport { localStorageApi, sessionStorageApi } from '@/utils/storageApi'\nexport default {\n  name: 'Feedback',\n  components: {\n    chartLine,\n    Tab,\n    TableList\n  },\n  data () {\n    let that = this\n    return {\n      token: sessionStorageApi.get('token'),\n      platformArr: [],\n      platformDesc: '全部',\n      profileArr: [],\n      profileScenarioName: '全部',\n      StrategyArr: [],\n      StrategyName: '全部',\n      positionArr: [],\n      position: '全部',\n\n      createForm: {\n        platformId: '',\n        profileId: '',\n        localDate: '',\n        strategy: '',\n        position: '',\n        token: sessionStorageApi.get('token')\n      },\n      typesMap: {\n        clickRateUser: this.$t('clickUV'),\n        conversionRate: this.$t('conversionRateUV'),\n        orderRate: this.$t('conversionNumberUV')\n      },\n      typesMap1: {\n        clickRateNumber: this.$t('clickPV'),\n        conversionNumber: this.$t('conversionRatePV'),\n        orderRateNumber: this.$t('conversionNumberPV')\n      },\n      clickRateByUserConditions: {},\n      clickRateByTimesConditions: {},\n      tablesSourceArr: [],\n      sourcedata: [\n        {\n          lable: 'ClickDataStatistics',\n          name: 'first'\n        },\n        {\n          lable: 'OrderStatistics',\n          name: 'second'\n        }\n      ],\n      showtableList: 'first',\n      tableData: [],\n      echartConfig: {\n        itemLineStyleColor: '#409eff',\n        bar1Background: '#5762bf',\n        bar2Background: '#ae9aed'\n      },\n      pickerOptions: {\n        disabledDate (time) {\n          return time > Date.now() - 3600 * 1000 * 24\n        },\n        shortcuts: [\n          {\n            text: that.$t('lastWeek'),\n            onClick (picker) {\n              const end = new Date(new Date() - 3600 * 1000 * 24)\n              const start = new Date()\n              start.setTime(end - 3600 * 1000 * 24 * 6)\n              picker.$emit('pick', [start, end])\n            }\n          },\n          {\n            text: that.$t('lastMonth'),\n            onClick (picker) {\n              const end = new Date(new Date() - 3600 * 1000 * 24)\n              const start = new Date()\n              start.setTime(start - 3600 * 1000 * 24 * 29)\n              picker.$emit('pick', [start, end])\n            }\n          },\n          {\n            text: that.$t('lastThreeMonth'),\n            onClick (picker) {\n              const end = new Date(new Date() - 3600 * 1000 * 24 * 1)\n              const start = new Date()\n              start.setTime(start - 3600 * 1000 * 24 * 89)\n              picker.$emit('pick', [start, end])\n            }\n          }\n        ]\n      },\n      clickRateUser: '',\n      clickRateNumber: ''\n    }\n  },\n  mounted () {\n    this.createForm.localDate = [getDay(-7), getDay(-1)]\n    getAllChartPlatform(this.token).then(res => {\n      this.platformArr = res\n    })\n    this.getChart()\n    localStorageApi.set('platformDesc', '全部')\n    localStorageApi.set('chartProfileId', '全部')\n    localStorageApi.set('StrategyName', '全部')\n    localStorageApi.set('position', '全部')\n  },\n  methods: {\n    getEchartsTitle (title) {\n      if (title.clickRateUser) {\n        this.clickRateUser = title.clickRateUser\n      }\n      if (title.clickRateNumber) {\n        this.clickRateNumber = title.clickRateNumber\n      }\n    },\n    platformIdChange (id) {\n      if (id === '') {\n        localStorageApi.set('platformDesc', '全部')\n        localStorageApi.set('chartProfileId', '全部')\n        localStorageApi.set('StrategyName', '全部')\n        localStorageApi.set('position', '全部')\n\n        this.profileArr = ''\n        this.StrategyArr = ''\n        this.positionArr = ''\n        this.createForm.profileId = ''\n        this.createForm.strategy = ''\n        this.createForm.position = ''\n        return\n      }\n      this.createForm.profileId = ''\n      this.createForm.strategy = ''\n      this.createForm.position = ''\n      this.profileIdChange('')\n      let obj = {}\n      obj = this.platformArr.find(item => {\n        return item.id === id // 筛选出匹配数据\n      })\n      localStorageApi.set('platformDesc', obj.platformDesc)\n      localStorageApi.set('chartProfileId', '全部')\n\n      getScenarioByPlatformId(id).then(res => {\n        this.profileArr = res\n      })\n      this.getStrategy()\n    },\n    profileIdChange (id) {\n      localStorageApi.set('chartProfileId', id)\n      if (id === '') {\n        localStorageApi.set('chartProfileId', '全部')\n        this.StrategyArr = ''\n        this.positionArr = ''\n      }\n      this.createForm.strategy = ''\n      this.createForm.position = ''\n      localStorageApi.set('StrategyName', '全部')\n      localStorageApi.set('position', '全部')\n      this.getStrategy()\n    },\n    getStrategy () {\n      // 推荐位\n      let id =\n        localStorageApi.get('chartPlatformId') || this.createForm.platformId\n      let name =\n        localStorageApi.get('chartProfileId') || this.createForm.profileId\n      getgetStrategyByScenario({ id, name }).then(res => {\n        if (res.length > 0) {\n          this.StrategyArr = res\n        }\n      })\n    },\n    strategyChange (strategy) {\n      localStorageApi.set('StrategyName', strategy)\n      this.createForm.position = ''\n      if (!strategy) {\n        this.positionArr = ''\n        localStorageApi.set('StrategyName', '全部')\n        localStorageApi.set('position', '全部')\n        return false\n      }\n      let obj = {}\n      obj = this.StrategyArr.find(item => {\n        return item.strategy === strategy // 筛选出匹配数据\n      })\n\n      this.positionArr = obj.position\n    },\n    positionChange (position) {\n      localStorageApi.set('position', position)\n      if (position === 0) {\n        localStorageApi.set('position', position)\n      }\n      if (position === '') {\n        localStorageApi.set('position', '全部')\n      }\n    },\n    getChart () {\n      let {\n        createForm: {\n          localDate: [startDate, endDate],\n          profileId: typeName,\n          platformId: platId,\n          position,\n          token\n        }\n      } = this\n      getClickRateUserConditions({\n        startDate,\n        endDate,\n        typeName,\n        platId,\n        position,\n        token\n      })\n        .then(res => {\n          this.clickRateByUserConditions = res\n        })\n        .catch(res => {\n          this.$message.error(res)\n        })\n      getClickRateNumberConditions({\n        startDate,\n        endDate,\n        typeName,\n        platId,\n        position,\n        token\n      })\n        .then(res => {\n          this.clickRateByTimesConditions = res\n        })\n        .catch(res => {\n          this.$message.error(res)\n        })\n\n      getChartListConditions({\n        startDate,\n        endDate,\n        typeName,\n        platId,\n        token\n      })\n        .then(res => {\n          this.tableData = res\n          this.tablesSourceArr = res\n        })\n        .catch(res => {\n          this.$message.error(res)\n        })\n    },\n    onSubmit (formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          if (!this.createForm.localDate) {\n            this.$message.error(this.$t('PleaseSelectDate'))\n            return false\n          }\n          this.platformDesc = localStorageApi.get('platformDesc')\n          this.profileScenarioName = localStorageApi.get('chartProfileId')\n          this.StrategyName = localStorageApi.get('StrategyName')\n          this.position = localStorageApi.get('position')\n          this.getChart()\n        }\n      })\n    },\n\n    getTabInfo (data) {\n      this.TabInfo = data.name\n      switch (data.name) {\n        case 'first':\n          this.showtableList = data.name\n          break\n        case 'second':\n          this.showtableList = data.name\n          break\n        default:\n          this.showtableList = 'first'\n      }\n    }\n  }\n}\n</script>\n<style lang=\"less\" >\n.chart_form_seletc {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  padding: 10px !important;\n  margin-bottom: 10px;\n  .search-box {\n    color: #303133;\n    -ms-flex-line-pack: center;\n    align-content: center;\n    margin-bottom: 6px;\n    padding-bottom: 8px;\n    border-radius: 4px 4px;\n    background: rgba(0, 134, 237, 0.1);\n    .form_title {\n      padding-left: 15px;\n      font-size: 14px;\n      margin-top: 9px;\n      font-weight: 700;\n      color: #bcd2ef;\n    }\n    .col {\n      padding-left: 15px;\n    }\n    .el-form-item {\n      width: 100%;\n      margin: 0 0px 5px 0;\n      .el-form-item__label {\n        display: block;\n        text-align: left;\n        line-height: 32px;\n      }\n      .label {\n        margin-bottom: 0;\n      }\n      .el-select {\n        width: 100%;\n      }\n    }\n    .el-button--small {\n      margin: 31px 0 0 0;\n      border: none;\n    }\n  }\n  .content {\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    .header {\n      display: flex;\n    }\n    .contentBottom {\n      display: flex;\n      flex-direction: row;\n      .left {\n        height: 756px;\n        flex: 3;\n        display: flex;\n        flex-direction: column;\n        .searchResult {\n          height: 88px;\n          padding-left: 15px;\n          display: flex;\n          flex-direction: column;\n          p {\n            span {\n              color: #bcd2ef;\n              font-size: 12px;\n              width: 50%;\n              display: inline-block;\n              b {\n                padding-right: 8px;\n                font-weight: normal;\n                color: #cae0fd;\n                display: inline-block;\n                width: 72px;\n                text-align: right;\n              }\n            }\n          }\n          .result_title {\n            margin-top: 9px;\n            margin-bottom: 5px;\n            font-size: 14px;\n            font-weight: 700;\n            color: #bcd2ef;\n          }\n        }\n        .charts {\n          display: flex;\n          flex: 1;\n          flex-direction: column;\n          .chartLine {\n            display: flex;\n            flex-direction: column;\n            border-radius: 4px 4px;\n            overflow: hidden;\n            .chartData {\n              width: 100%;\n              // .echartsTitle {\n              //   height: 44px;\n              //   padding: 4px 0px;\n              //   background: rgba(0, 134, 237, 0.1);\n              //   p {\n              //     color: #cae0fd;\n              //     // line-height: 22px;\n              //     padding-left: 15px;\n              //     font-size: 13px;\n              //   }\n              //   p:last-child {\n              //     font-size: 12px;\n              //   }\n              // }\n              .echarts {\n                width: 100%;\n                height: 324px;\n              }\n            }\n            .chartData:first-child {\n              margin-bottom: 8px;\n            }\n          }\n        }\n      }\n      .el-form-item__content {\n        .el-input__inner {\n          border: none;\n        }\n      }\n      .right {\n        height: 743px;\n        margin-left: 6px;\n        flex: 5;\n        display: flex;\n        flex-direction: column;\n        border-radius: 4px 4px;\n        .rightHeader {\n          height: 88px;\n        }\n        .change_tabs {\n          padding-bottom: 13px;\n          padding-top: 10px;\n          .active {\n            position: relative;\n          }\n          .active::after {\n            content: \"\";\n            position: absolute;\n            height: 2px;\n            width: 90%;\n            background:#6082fd;\n            left: 5%;\n            bottom: 0%;\n          }\n          p {\n            height: 40px;\n            display: flex;\n            align-items: center;\n            font-size: 12px;\n          }\n        }\n        .tableTitle {\n          height: 22px;\n          margin-top: 10px;\n          align-items: center;\n          padding-left: 20px;\n          color: #bcd2ef;\n          font-size: 14px;\n          font-weight: 700;\n          display: flex;\n        }\n        .table_list {\n          height: 100%;\n          border: none;\n          // background: #112c46;\n        }\n      }\n    }\n  }\n}\n.el-form-item__content {\n  line-height: 30px;\n  .el_date {\n    width: 100%;\n  }\n  .el-input__inner {\n    height: 30px;\n    line-height: 30px;\n  }\n  .el-range-separator {\n    line-height: 22px;\n  }\n  .el-input__icon {\n    line-height: 25px;\n  }\n}\n.chart_form_seletc .search-box .el-form-item .el-form-item__label{\n    font-size: 12px;\n}\n</style>\n"],"sourceRoot":"src/views/chart"}]}