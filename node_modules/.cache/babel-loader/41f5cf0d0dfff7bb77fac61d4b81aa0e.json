{"remainingRequest":"/Users/shizhonghua/workspace/sell/node_modules/babel-loader/lib/index.js!/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/shizhonghua/workspace/sell/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shizhonghua/workspace/sell/src/views/user/users/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shizhonghua/workspace/sell/src/views/user/users/index.vue","mtime":1561425821000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport createEditDialog from \"./createEditDialog\";\nimport saveEditDialog from \"./saveEditDialog\";\nimport { getUser, userDelete, roleSave, userSave } from '@/http/api/accountApi.js';\nexport default {\n  components: {\n    createEditDialog: createEditDialog,\n    saveEditDialog: saveEditDialog\n  },\n  data: function data() {\n    return {\n      pageIndex: 1,\n      pageSize: 10,\n      totalCount: 0,\n      userList: []\n    };\n  },\n  computed: {\n    showList: function showList() {\n      var pageIndex = this.pageIndex,\n          pageSize = this.pageSize,\n          userList = this.userList;\n      return userList.slice((pageIndex - 1) * pageSize, pageIndex * pageSize);\n    }\n  },\n  mounted: function mounted() {\n    this.getContent();\n  },\n  methods: {\n    getContent: function getContent() {\n      var _this = this;\n\n      getUser().then(function (res) {\n        _this.totalCount = res.userList.length;\n        _this.userList = res.userList;\n      });\n    },\n    itemChange: function itemChange() {\n      var _this2 = this;\n\n      for (var _len = arguments.length, result = new Array(_len), _key = 0; _key < _len; _key++) {\n        result[_key] = arguments[_key];\n      }\n\n      if (result[1]) {\n        this.$refs.saveEditDialog.open(result[0]);\n      } else {\n        var uuid = result[0].uuid;\n        this.$confirm(\"\".concat(this.$t('ConfirmDelete'), \" \\\"\").concat(result[0].username, \"\\\"\")).then(function () {\n          userDelete({\n            uid: [uuid]\n          }).then(function () {\n            _this2.$message.success(_this2.$t('DeleteUsers'));\n\n            _this2.getContent(_this2.pageIndex);\n          });\n        }).catch(function (err) {\n          _this2.$message.error(err.body.message);\n        });\n      }\n    },\n    handleCurrentChange: function handleCurrentChange(pageIndex) {\n      this.pageIndex = pageIndex;\n    },\n    getPageData: function getPageData(result) {\n      var _this3 = this;\n\n      var data = result.data,\n          code = result.code;\n\n      if (code) {\n        roleSave(data).then(function () {\n          _this3.$message.success(_this3.$t('UserPrivileges'));\n\n          _this3.getContent(_this3.pageIndex);\n        }).catch(function (err) {\n          _this3.$message.error(err.body.message);\n        });\n      } else {\n        userSave(data).then(function () {\n          _this3.pageIndex = 1;\n\n          _this3.$message.success(_this3.$t('UserCreate'));\n\n          _this3.getContent();\n        }).catch(function (err) {\n          _this3.$message.error(err.body.message);\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"content-wrapper\">\n    <el-card>\n      <el-button\n        type=\"primary\"\n        size=\"medium\"\n        @click=\"$refs.createEditDialog.open()\"\n      >\n        {{ $t(\"create\") }}\n        <i class=\"el-icon-plus el-icon--right\" />\n      </el-button>\n    </el-card>\n    <el-table :data=\"showList\" class=\"hot-table\">\n      <el-table-column :label=\"$t('userName')\" prop=\"username\" />\n      <el-table-column :label=\"$t('email')\" prop=\"email\" />\n      <el-table-column :label=\"$t('role')\">\n        <template slot-scope=\"scope\">\n          <el-tag\n            v-show=\"item.name\"\n            v-for=\"item in scope.row.roleList\"\n            :key=\"item.id\"\n            type=\"success\"\n          >\n            {{ item.name }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column :label=\"$t('action')\">\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            circle\n            @click=\"itemChange(scope.row, true)\"\n          />\n          <el-button\n            type=\"danger\"\n            icon=\"el-icon-delete\"\n            circle\n            @click=\"itemChange(scope.row, false)\"\n          />\n        </template>\n      </el-table-column>\n    </el-table>\n    <create-edit-dialog ref=\"createEditDialog\" @success=\"getPageData\" />\n    <save-edit-dialog ref=\"saveEditDialog\" @success=\"getPageData\" />\n    <div class=\"block\">\n      <el-pagination\n        :current-page=\"pageIndex\"\n        :page-size=\"pageSize\"\n        :total=\"totalCount\"\n        layout=\"total, prev, pager, next, jumper\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </div>\n  </div>\n</template>\n<script>\nimport createEditDialog from './createEditDialog'\nimport saveEditDialog from './saveEditDialog'\nimport {\n  getUser,\n  userDelete,\n  roleSave,\n  userSave\n} from '@/http/api/accountApi.js'\nexport default {\n  components: {\n    createEditDialog,\n    saveEditDialog\n  },\n  data () {\n    return {\n      pageIndex: 1,\n      pageSize: 10,\n      totalCount: 0,\n      userList: []\n    }\n  },\n  computed: {\n    showList () {\n      let { pageIndex, pageSize, userList } = this\n      return userList.slice((pageIndex - 1) * pageSize, pageIndex * pageSize)\n    }\n  },\n  mounted () {\n    this.getContent()\n  },\n  methods: {\n    getContent () {\n      getUser().then(res => {\n        this.totalCount = res.userList.length\n        this.userList = res.userList\n      })\n    },\n    itemChange (...result) {\n      if (result[1]) {\n        this.$refs.saveEditDialog.open(result[0])\n      } else {\n        let uuid = result[0].uuid\n        this.$confirm(`${this.$t('ConfirmDelete')} \"${result[0].username}\"`)\n          .then(() => {\n            userDelete({ uid: [uuid] }).then(() => {\n              this.$message.success(this.$t('DeleteUsers'))\n              this.getContent(this.pageIndex)\n            })\n          })\n          .catch(err => {\n            this.$message.error(err.body.message)\n          })\n      }\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageIndex = pageIndex\n    },\n    getPageData (result) {\n      let { data, code } = result\n      if (code) {\n        roleSave(data)\n          .then(() => {\n            this.$message.success(this.$t('UserPrivileges'))\n            this.getContent(this.pageIndex)\n          })\n          .catch(err => {\n            this.$message.error(err.body.message)\n          })\n      } else {\n        userSave(data)\n          .then(() => {\n            this.pageIndex = 1\n            this.$message.success(this.$t('UserCreate'))\n            this.getContent()\n          })\n          .catch(err => {\n            this.$message.error(err.body.message)\n          })\n      }\n    }\n  }\n}\n</script>\n<style lang=\"less\">\n.hot-table.el-table div.cell {\n  white-space: nowrap;\n}\n</style>\n"],"sourceRoot":"src/views/user/users"}]}