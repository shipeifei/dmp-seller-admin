{"remainingRequest":"/Users/shizhonghua/workspace/sell/node_modules/babel-loader/lib/index.js!/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/shizhonghua/workspace/sell/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shizhonghua/workspace/sell/src/views/chart/chartsView/lineMarker.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shizhonghua/workspace/sell/src/views/chart/chartsView/lineMarker.vue","mtime":1561364388000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\n//\n//\n//\n//\n//\nimport resize from \"./resize\";\nexport default {\n  mixins: [resize],\n  props: {\n    id: {\n      type: String,\n      default: 'chart2'\n    },\n    data: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    typesMap: {\n      type: Object,\n      default: function _default() {\n        return {\n          clickRateUser: this.$t('clickUV'),\n          conversionRate: this.$t('conversionRateUV'),\n          orderRate: this.$t('conversionNumberUV')\n        };\n      }\n    },\n    echartConfig: {\n      type: Object,\n      default: function _default() {\n        return {\n          itemLineStyleColor: '#409eff',\n          bar1Background: '#5762bf',\n          bar2Background: '#ae9aed'\n        };\n      }\n    }\n  },\n  data: function data() {\n    return {\n      chart: null\n    };\n  },\n  watch: {\n    data: function data() {\n      this.initChart();\n    }\n  },\n  mounted: function mounted() {\n    this.initChart();\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (!this.chart) {\n      return;\n    }\n\n    this.chart.dispose();\n    this.chart = null;\n  },\n  methods: {\n    // 补齐空缺的数据\n    changeJsonFormat: function changeJsonFormat(json) {\n      var types = Object.keys(this.typesMap);\n      var newJson = {\n        data: {}\n      };\n      newJson.xAxisData = Object.keys(json);\n      types.forEach(function (item) {\n        newJson.data[item] = [];\n      });\n\n      var _loop = function _loop(i) {\n        types.forEach(function (typeItem) {\n          newJson.data[typeItem].push(typeof json[i][typeItem] === 'undefined' ? 0 : parseInt(json[i][typeItem] * 10000) / 100);\n        });\n      };\n\n      for (var i in json) {\n        _loop(i);\n      }\n\n      return newJson;\n    },\n    initChart: function initChart() {\n      this.chart = this.$echarts.init(document.getElementById(this.id));\n      var newJson = this.changeJsonFormat(this.data);\n      var data = newJson.data;\n      var xAxisData = newJson.xAxisData;\n      var _this$echartConfig = this.echartConfig,\n          itemLineStyleColor = _this$echartConfig.itemLineStyleColor,\n          bar1Background = _this$echartConfig.bar1Background,\n          bar2Background = _this$echartConfig.bar2Background;\n      var title = {\n        clickRateUser: this.typesMap.clickRateUser,\n        clickRateNumber: this.typesMap.clickRateNumber\n      };\n      this.$emit('sendEchartsTitle', title);\n      this.chart.clear(); // 将原有echarts清空，等待重新渲染新的echarts\n\n      this.chart.resize(); // 调用resize()方法适配不同分辨率\n\n      this.chart.setOption({\n        // backgroundColor: '#0e294f',\n        backgroundColor: 'rgba(17,44,70,0.2)',\n        title: {\n          padding: [14, // 上\n          0, // 右\n          10, // 下\n          15 // 左\n          ],\n          textStyle: {\n            fontWeight: 'normal',\n            color: '#bcd2ef',\n            fontSize: 12\n          },\n          text: this.typesMap.clickRateUser || this.typesMap.clickRateNumber\n        },\n        tooltip: {\n          // 这部分是是否鼠标移入之后显示一个title\n          trigger: 'axis',\n          confine: true,\n          // 设置超出容器被遮挡时的样式\n          axisPointer: {\n            type: 'cross',\n            label: {\n              backgroundColor: '#6a7985' // 设置鼠标选中折线点的时候数字的颜色\n\n            }\n          },\n          formatter: function formatter(params) {\n            var res = params[0].name + '<br/>';\n\n            for (var i in params) {\n              res += params[i].marker + params[i].seriesName + '：' + params[i].data + '%<br/>';\n            }\n\n            return res;\n          }\n        },\n        dataZoom: [{\n          show: true,\n          height: 15,\n          xAxisIndex: [0],\n          bottom: 10,\n          textStyle: {\n            color: '#fff',\n            fontSize: '12px'\n          },\n          start: xAxisData.length > 6 ? 100 - 7 / xAxisData.length * 100 : 0,\n          end: 100,\n          handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z'\n        }],\n        grid: {\n          left: '-4%',\n          right: '8%',\n          top: '48',\n          bottom: '15px',\n          containLabel: true\n        },\n        xAxis: [{\n          type: 'category',\n          boundaryGap: true,\n          data: xAxisData,\n          axisLabel: {\n            show: true,\n            interval: xAxisData.length > 30 ? 'auto' : 0,\n            rotate: 45,\n            textStyle: {\n              color: '#fff',\n              fontSize: '12px'\n            }\n          },\n          axisLine: {\n            // X轴\n            show: true,\n            lineStyle: {\n              color: '#ccc'\n            }\n          },\n          axisTick: {\n            // X轴刻度线\n            show: false\n          },\n          splitLine: {\n            // X网格线\n            show: false\n          }\n        }],\n        yAxis: [{\n          type: 'value',\n          show: false,\n          axisLabel: {\n            show: true,\n            formatter: '{value} %',\n            textStyle: {\n              color: '#fff',\n              fontSize: '12px'\n            }\n          },\n          axisLine: {\n            // y轴\n            show: false,\n            lineStyle: {\n              color: '#ccc'\n            }\n          },\n          axisTick: {\n            // y轴刻度线\n            show: false\n          },\n          splitLine: {\n            // 网格线\n            show: true,\n            lineStyle: {\n              color: '#ddd'\n            }\n          }\n        }, {\n          type: 'value',\n          position: 'left',\n          axisLabel: {\n            show: true,\n            formatter: '{value} %',\n            textStyle: {\n              color: '#fff',\n              fontSize: '12px'\n            }\n          },\n          axisLine: {\n            // y轴\n            show: true,\n            lineStyle: {\n              color: '#ccc'\n            }\n          },\n          axisTick: {\n            // y轴刻度线\n            show: false\n          },\n          splitLine: {\n            // 网格线\n            show: false,\n            lineStyle: {\n              color: '#ddd'\n            }\n          }\n        }, {\n          type: 'value',\n          position: 'right',\n          axisLabel: {\n            show: true,\n            formatter: '{value} %',\n            textStyle: {\n              color: '#fff',\n              fontSize: '12px'\n            }\n          },\n          axisLine: {\n            // y轴\n            show: true,\n            lineStyle: {\n              color: '#ccc'\n            }\n          },\n          axisTick: {\n            // y轴刻度线\n            show: false\n          },\n          splitLine: {\n            // 网格线\n            show: false,\n            lineStyle: {\n              color: '#ddd'\n            }\n          }\n        }],\n        series: [{\n          name: this.typesMap.clickRateUser || this.typesMap.clickRateNumber,\n          type: 'line',\n          smooth: true,\n          itemStyle: {\n            normal: {\n              color: itemLineStyleColor,\n              // 设置折线点的颜色\n              lineStyle: {\n                color: itemLineStyleColor // 设置折线条的颜色\n\n              }\n            }\n          },\n          data: data.clickRateUser || data.clickRateNumber\n        }, {\n          name: this.typesMap.conversionRate || this.typesMap.conversionNumber,\n          type: 'bar',\n          barWidth: 3,\n          smooth: true,\n          itemStyle: {\n            emphasis: {\n              barBorderRadius: [7, 7, 0, 0]\n            },\n            normal: {\n              barBorderRadius: [7, 7, 0, 0],\n              color: bar1Background\n            }\n          },\n          yAxisIndex: 1,\n          data: data.conversionRate || data.conversionNumber\n        }, {\n          name: this.typesMap.orderRate || this.typesMap.orderRateNumber,\n          type: 'bar',\n          barWidth: 3,\n          smooth: true,\n          itemStyle: {\n            emphasis: {\n              barBorderRadius: [7, 7, 0, 0]\n            },\n            normal: {\n              barBorderRadius: [7, 7, 0, 0],\n              color: bar2Background\n            }\n          },\n          yAxisIndex: 2,\n          data: data.orderRate || data.orderRateNumber\n        }]\n      });\n    }\n  }\n};",{"version":3,"sources":["lineMarker.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"chart-container\">\n    <div :id=\"id\" class=\"lineMarker\"/>\n  </div>\n</template>\n<script>\nimport resize from './resize'\nexport default {\n  mixins: [resize],\n  props: {\n    id: {\n      type: String,\n      default: 'chart2'\n    },\n    data: {\n      type: Object,\n      default () {\n        return {}\n      }\n    },\n    typesMap: {\n      type: Object,\n      default () {\n        return {\n          clickRateUser: this.$t('clickUV'),\n          conversionRate: this.$t('conversionRateUV'),\n          orderRate: this.$t('conversionNumberUV')\n        }\n      }\n    },\n    echartConfig: {\n      type: Object,\n      default () {\n        return {\n          itemLineStyleColor: '#409eff',\n          bar1Background: '#5762bf',\n          bar2Background: '#ae9aed'\n        }\n      }\n    }\n  },\n  data () {\n    return {\n      chart: null\n    }\n  },\n  watch: {\n    data () {\n      this.initChart()\n    }\n  },\n  mounted () {\n    this.initChart()\n  },\n  beforeDestroy () {\n    if (!this.chart) {\n      return\n    }\n    this.chart.dispose()\n    this.chart = null\n  },\n  methods: {\n    // 补齐空缺的数据\n    changeJsonFormat (json) {\n      let types = Object.keys(this.typesMap)\n      let newJson = { data: {} }\n      newJson.xAxisData = Object.keys(json)\n      types.forEach(item => {\n        newJson.data[item] = []\n      })\n      for (let i in json) {\n        types.forEach(typeItem => {\n          newJson.data[typeItem].push(\n            typeof json[i][typeItem] === 'undefined'\n              ? 0\n              : parseInt(json[i][typeItem] * 10000) / 100\n          )\n        })\n      }\n      return newJson\n    },\n    initChart () {\n      this.chart = this.$echarts.init(document.getElementById(this.id))\n      let newJson = this.changeJsonFormat(this.data)\n      let data = newJson.data\n      let xAxisData = newJson.xAxisData\n      let {\n        itemLineStyleColor,\n        bar1Background,\n        bar2Background\n      } = this.echartConfig\n      let title = {\n        clickRateUser: this.typesMap.clickRateUser,\n        clickRateNumber: this.typesMap.clickRateNumber\n      }\n      this.$emit('sendEchartsTitle', title)\n      this.chart.clear() // 将原有echarts清空，等待重新渲染新的echarts\n      this.chart.resize() // 调用resize()方法适配不同分辨率\n      this.chart.setOption({\n        // backgroundColor: '#0e294f',\n        backgroundColor: 'rgba(17,44,70,0.2)',\n        title: {\n          padding: [\n            14, // 上\n            0, // 右\n            10, // 下\n            15 // 左\n          ],\n          textStyle: {\n            fontWeight: 'normal',\n            color: '#bcd2ef',\n            fontSize: 12\n          },\n          text: this.typesMap.clickRateUser || this.typesMap.clickRateNumber\n        },\n        tooltip: {\n          // 这部分是是否鼠标移入之后显示一个title\n          trigger: 'axis',\n          confine: true, // 设置超出容器被遮挡时的样式\n          axisPointer: {\n            type: 'cross',\n            label: {\n              backgroundColor: '#6a7985' // 设置鼠标选中折线点的时候数字的颜色\n            }\n          },\n          formatter: function (params) {\n            var res = params[0].name + '<br/>'\n            for (var i in params) {\n              res +=\n                params[i].marker +\n                params[i].seriesName +\n                '：' +\n                params[i].data +\n                '%<br/>'\n            }\n            return res\n          }\n        },\n        dataZoom: [\n          {\n            show: true,\n            height: 15,\n            xAxisIndex: [0],\n            bottom: 10,\n            textStyle: {\n              color: '#fff',\n              fontSize: '12px'\n            },\n            start:\n              xAxisData.length > 6 ? 100 - (7 / xAxisData.length) * 100 : 0,\n            end: 100,\n            handleIcon:\n              'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z'\n          }\n        ],\n        grid: {\n          left: '-4%',\n          right: '8%',\n          top: '48',\n          bottom: '15px',\n          containLabel: true\n        },\n        xAxis: [\n          {\n            type: 'category',\n            boundaryGap: true,\n            data: xAxisData,\n            axisLabel: {\n              show: true,\n              interval: xAxisData.length > 30 ? 'auto' : 0,\n              rotate: 45,\n              textStyle: {\n                color: '#fff',\n                fontSize: '12px'\n              }\n            },\n            axisLine: {\n              // X轴\n              show: true,\n              lineStyle: {\n                color: '#ccc'\n              }\n            },\n            axisTick: {\n              // X轴刻度线\n              show: false\n            },\n            splitLine: {\n              // X网格线\n              show: false\n            }\n          }\n        ],\n        yAxis: [\n          {\n            type: 'value',\n            show: false,\n            axisLabel: {\n              show: true,\n              formatter: '{value} %',\n              textStyle: {\n                color: '#fff',\n                fontSize: '12px'\n              }\n            },\n            axisLine: {\n              // y轴\n              show: false,\n              lineStyle: {\n                color: '#ccc'\n              }\n            },\n            axisTick: {\n              // y轴刻度线\n              show: false\n            },\n            splitLine: {\n              // 网格线\n              show: true,\n              lineStyle: {\n                color: '#ddd'\n              }\n            }\n          },\n          {\n            type: 'value',\n            position: 'left',\n            axisLabel: {\n              show: true,\n              formatter: '{value} %',\n              textStyle: {\n                color: '#fff',\n                fontSize: '12px'\n              }\n            },\n            axisLine: {\n              // y轴\n              show: true,\n              lineStyle: {\n                color: '#ccc'\n              }\n            },\n            axisTick: {\n              // y轴刻度线\n              show: false\n            },\n            splitLine: {\n              // 网格线\n              show: false,\n              lineStyle: {\n                color: '#ddd'\n              }\n            }\n          },\n          {\n            type: 'value',\n            position: 'right',\n            axisLabel: {\n              show: true,\n              formatter: '{value} %',\n              textStyle: {\n                color: '#fff',\n                fontSize: '12px'\n              }\n            },\n            axisLine: {\n              // y轴\n              show: true,\n              lineStyle: {\n                color: '#ccc'\n              }\n            },\n            axisTick: {\n              // y轴刻度线\n              show: false\n            },\n            splitLine: {\n              // 网格线\n              show: false,\n              lineStyle: {\n                color: '#ddd'\n              }\n            }\n          }\n        ],\n        series: [\n          {\n            name: this.typesMap.clickRateUser || this.typesMap.clickRateNumber,\n            type: 'line',\n            smooth: true,\n            itemStyle: {\n              normal: {\n                color: itemLineStyleColor, // 设置折线点的颜色\n                lineStyle: {\n                  color: itemLineStyleColor // 设置折线条的颜色\n                }\n              }\n            },\n            data: data.clickRateUser || data.clickRateNumber\n          },\n          {\n            name:\n              this.typesMap.conversionRate || this.typesMap.conversionNumber,\n            type: 'bar',\n            barWidth: 3,\n            smooth: true,\n            itemStyle: {\n              emphasis: {\n                barBorderRadius: [7, 7, 0, 0]\n              },\n              normal: {\n                barBorderRadius: [7, 7, 0, 0],\n                color: bar1Background\n              }\n            },\n            yAxisIndex: 1,\n            data: data.conversionRate || data.conversionNumber\n          },\n          {\n            name: this.typesMap.orderRate || this.typesMap.orderRateNumber,\n            type: 'bar',\n            barWidth: 3,\n            smooth: true,\n            itemStyle: {\n              emphasis: {\n                barBorderRadius: [7, 7, 0, 0]\n              },\n              normal: {\n                barBorderRadius: [7, 7, 0, 0],\n                color: bar2Background\n              }\n            },\n            yAxisIndex: 2,\n            data: data.orderRate || data.orderRateNumber\n          }\n        ]\n      })\n    }\n  }\n}\n</script>\n<style scoped>\n.chart-container {\n  position: relative;\n  width: 100%;\n  height: calc(100vh - 284px);\n}\n.lineMarker {\n  width: 100%;\n  height: 100%;\n}\n</style>\n"],"sourceRoot":"src/views/chart/chartsView"}]}