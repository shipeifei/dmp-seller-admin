{"remainingRequest":"/Users/shizhonghua/workspace/sell/node_modules/babel-loader/lib/index.js!/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/shizhonghua/workspace/sell/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shizhonghua/workspace/sell/src/views/sys/hotProduct/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shizhonghua/workspace/sell/src/views/sys/hotProduct/index.vue","mtime":1561433999000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport createEditDialog from \"./createEditDialog\";\nimport { getDefaultProductPage, getDefaultProduct, defaultProductAndDetailAddAndUpdate } from '@/http/api/hotProductApi.js'; // var padDate = function (va) {\n//   va = va < 10 ? '0' + va : va\n//   return va\n// }\n\nexport default {\n  name: 'HotProduct',\n  components: {\n    createEditDialog: createEditDialog\n  },\n  data: function data() {\n    return {\n      pageIndex: 1,\n      pageSize: 10,\n      totalCount: 0,\n      productArr: [0],\n      productShowList: []\n    };\n  },\n  mounted: function mounted() {\n    this.getContent(1);\n  },\n  // filters: {\n  //   formatDate: function (val) {\n  //     var value = new Date(val)\n  //     var year = value.getFullYear()\n  //     var month = padDate(value.getMonth() + 1)\n  //     var day = padDate(value.getDate())\n  //     return year + '-' + month + '-' + day\n  //   }\n  // },\n  methods: {\n    // productShow (item) {\n    //   getDefaultProduct(item.id).then(res => {\n    //     this.productShowList = res.listDetails\n    //   })\n    // },\n    getContent: function getContent(pageIndex) {\n      var _this = this;\n\n      var pageSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n      getDefaultProductPage({\n        pageIndex: pageIndex,\n        pageSize: pageSize\n      }).then(function (res) {\n        _this.totalCount = res.length;\n        _this.productArr = res;\n      });\n    },\n    itemChange: function itemChange() {\n      var _this2 = this;\n\n      for (var _len = arguments.length, result = new Array(_len), _key = 0; _key < _len; _key++) {\n        result[_key] = arguments[_key];\n      }\n\n      getDefaultProduct(result[0]).then(function (res) {\n        var resultData = result[0];\n\n        _this2.$refs.createEditDialog.open(res, resultData);\n      });\n    },\n    handleCurrentChange: function handleCurrentChange(pageIndex) {\n      this.pageIndex = pageIndex;\n      this.getContent(pageIndex);\n    },\n    getPageData: function getPageData(result) {\n      var _this3 = this;\n\n      var data = result.data,\n          code = result.code,\n          dataResource = result.dataResource;\n      defaultProductAndDetailAddAndUpdate(data.codes, dataResource).then(function (res) {\n        if (code) {\n          _this3.$message.success(_this3.$t('productUpdate'));\n\n          _this3.getContent(_this3.pageIndex);\n        } else {\n          _this3.$message.success(_this3.$t('productCreate'));\n\n          _this3.pageIndex = 1;\n\n          _this3.getContent(1);\n        }\n      }).catch(function (err) {\n        _this3.$message.error(err.body.message);\n      });\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,OAAA,gBAAA;AACA,SACA,qBADA,EAEA,iBAFA,EAGA,mCAHA,QAIA,6BAJA,C,CAKA;AACA;AACA;AACA;;AACA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,gBAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,CADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA,CAHA;AAIA,MAAA,UAAA,EAAA,CAAA,CAAA,CAJA;AAKA,MAAA,eAAA,EAAA;AALA,KAAA;AAOA,GAbA;AAcA,EAAA,OAdA,qBAcA;AACA,SAAA,UAAA,CAAA,CAAA;AACA,GAhBA;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAA,OAAA,EAAA;AACA;AACA;AACA;AACA;AACA;AACA,IAAA,UANA,sBAMA,SANA,EAMA;AAAA;;AAAA,UAAA,QAAA,uEAAA,EAAA;AACA,MAAA,qBAAA,CAAA;AAAA,QAAA,SAAA,EAAA,SAAA;AAAA,QAAA,QAAA,EAAA;AAAA,OAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,GAAA,CAAA,MAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,GAAA;AACA,OAHA;AAIA,KAXA;AAYA,IAAA,UAZA,wBAYA;AAAA;;AAAA,wCAAA,MAAA;AAAA,QAAA,MAAA;AAAA;;AACA,MAAA,iBAAA,CAAA,MAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,UAAA,GAAA,MAAA,CAAA,CAAA,CAAA;;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,gBAAA,CAAA,IAAA,CAAA,GAAA,EAAA,UAAA;AACA,OAHA;AAIA,KAjBA;AAkBA,IAAA,mBAlBA,+BAkBA,SAlBA,EAkBA;AACA,WAAA,SAAA,GAAA,SAAA;AACA,WAAA,UAAA,CAAA,SAAA;AACA,KArBA;AAsBA,IAAA,WAtBA,uBAsBA,MAtBA,EAsBA;AAAA;;AAAA,UACA,IADA,GACA,MADA,CACA,IADA;AAAA,UACA,IADA,GACA,MADA,CACA,IADA;AAAA,UACA,YADA,GACA,MADA,CACA,YADA;AAEA,MAAA,mCAAA,CAAA,IAAA,CAAA,KAAA,EAAA,YAAA,CAAA,CACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,YAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA,CAAA,EAAA,CAAA,eAAA,CAAA;;AACA,UAAA,MAAA,CAAA,UAAA,CAAA,MAAA,CAAA,SAAA;AACA,SAHA,MAGA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA,CAAA,EAAA,CAAA,eAAA,CAAA;;AACA,UAAA,MAAA,CAAA,SAAA,GAAA,CAAA;;AACA,UAAA,MAAA,CAAA,UAAA,CAAA,CAAA;AACA;AACA,OAVA,EAWA,KAXA,CAWA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA;AACA,OAbA;AAcA;AAtCA;AA1BA,CAAA","sourcesContent":["<template>\n  <div class=\"content-wrapper\" >\n    <el-table :data=\"productArr.slice((pageIndex-1)*pageSize,pageIndex*pageSize)\" class=\"hot-table\">\n      <el-table-column :label=\"$t('productDes')\" prop=\"productDesc\">\n        <template slot-scope=\" scope\">{{scope.row}}</template>\n      </el-table-column>\n      <el-table-column :label=\"$t('action')\">\n        <template slot-scope=\" scope\">\n          <el-button\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            circle\n            @click=\"itemChange(scope.row, true)\"\n          />\n        </template>\n      </el-table-column>\n    </el-table>\n    <create-edit-dialog ref=\"createEditDialog\" @success=\"getPageData\"/>\n    <div class=\"block\">\n      <el-pagination\n        :current-page=\"pageIndex\"\n        :page-size=\"pageSize\"\n        :total=\"totalCount\"\n        layout=\"total, prev, pager, next, jumper\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </div>\n  </div>\n</template>\n<script>\nimport createEditDialog from './createEditDialog'\nimport {\n  getDefaultProductPage,\n  getDefaultProduct,\n  defaultProductAndDetailAddAndUpdate\n} from '@/http/api/hotProductApi.js'\n// var padDate = function (va) {\n//   va = va < 10 ? '0' + va : va\n//   return va\n// }\nexport default {\n  name: 'HotProduct',\n  components: {\n    createEditDialog\n  },\n  data () {\n    return {\n      pageIndex: 1,\n      pageSize: 10,\n      totalCount: 0,\n      productArr: [0],\n      productShowList: []\n    }\n  },\n  mounted () {\n    this.getContent(1)\n  },\n  // filters: {\n  //   formatDate: function (val) {\n  //     var value = new Date(val)\n  //     var year = value.getFullYear()\n  //     var month = padDate(value.getMonth() + 1)\n  //     var day = padDate(value.getDate())\n  //     return year + '-' + month + '-' + day\n  //   }\n  // },\n  methods: {\n    // productShow (item) {\n    //   getDefaultProduct(item.id).then(res => {\n    //     this.productShowList = res.listDetails\n    //   })\n    // },\n    getContent (pageIndex, pageSize = 10) {\n      getDefaultProductPage({ pageIndex, pageSize }).then(res => {\n        this.totalCount = res.length\n        this.productArr = res\n      })\n    },\n    itemChange (...result) {\n      getDefaultProduct(result[0]).then(res => {\n        let resultData = result[0]\n        this.$refs.createEditDialog.open(res, resultData)\n      })\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageIndex = pageIndex\n      this.getContent(pageIndex)\n    },\n    getPageData (result) {\n      let { data, code, dataResource } = result\n      defaultProductAndDetailAddAndUpdate(data.codes, dataResource)\n        .then(res => {\n          if (code) {\n            this.$message.success(this.$t('productUpdate'))\n            this.getContent(this.pageIndex)\n          } else {\n            this.$message.success(this.$t('productCreate'))\n            this.pageIndex = 1\n            this.getContent(1)\n          }\n        })\n        .catch(err => {\n          this.$message.error(err.body.message)\n        })\n    }\n  }\n}\n</script>\n<style lang=\"less\">\n  .hot-table.el-table div.cell {\n    white-space: nowrap;\n  }\n\n</style>\n"],"sourceRoot":"src/views/sys/hotProduct"}]}