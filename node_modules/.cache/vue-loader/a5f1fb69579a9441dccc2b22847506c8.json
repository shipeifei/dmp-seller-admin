{"remainingRequest":"/Users/shizhonghua/workspace/sell/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shizhonghua/workspace/sell/src/views/sys/hotProduct/index.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/Users/shizhonghua/workspace/sell/src/views/sys/hotProduct/index.vue","mtime":1561433999000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/less-loader/dist/cjs.js","mtime":1561617794000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.hot-table.el-table div.cell {\n  white-space: nowrap;\n}\n\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/sys/hotProduct","sourcesContent":["<template>\n  <div class=\"content-wrapper\" >\n    <el-table :data=\"productArr.slice((pageIndex-1)*pageSize,pageIndex*pageSize)\" class=\"hot-table\">\n      <el-table-column :label=\"$t('productDes')\" prop=\"productDesc\">\n        <template slot-scope=\" scope\">{{scope.row}}</template>\n      </el-table-column>\n      <el-table-column :label=\"$t('action')\">\n        <template slot-scope=\" scope\">\n          <el-button\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n            circle\n            @click=\"itemChange(scope.row, true)\"\n          />\n        </template>\n      </el-table-column>\n    </el-table>\n    <create-edit-dialog ref=\"createEditDialog\" @success=\"getPageData\"/>\n    <div class=\"block\">\n      <el-pagination\n        :current-page=\"pageIndex\"\n        :page-size=\"pageSize\"\n        :total=\"totalCount\"\n        layout=\"total, prev, pager, next, jumper\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </div>\n  </div>\n</template>\n<script>\nimport createEditDialog from './createEditDialog'\nimport {\n  getDefaultProductPage,\n  getDefaultProduct,\n  defaultProductAndDetailAddAndUpdate\n} from '@/http/api/hotProductApi.js'\n// var padDate = function (va) {\n//   va = va < 10 ? '0' + va : va\n//   return va\n// }\nexport default {\n  name: 'HotProduct',\n  components: {\n    createEditDialog\n  },\n  data () {\n    return {\n      pageIndex: 1,\n      pageSize: 10,\n      totalCount: 0,\n      productArr: [0],\n      productShowList: []\n    }\n  },\n  mounted () {\n    this.getContent(1)\n  },\n  // filters: {\n  //   formatDate: function (val) {\n  //     var value = new Date(val)\n  //     var year = value.getFullYear()\n  //     var month = padDate(value.getMonth() + 1)\n  //     var day = padDate(value.getDate())\n  //     return year + '-' + month + '-' + day\n  //   }\n  // },\n  methods: {\n    // productShow (item) {\n    //   getDefaultProduct(item.id).then(res => {\n    //     this.productShowList = res.listDetails\n    //   })\n    // },\n    getContent (pageIndex, pageSize = 10) {\n      getDefaultProductPage({ pageIndex, pageSize }).then(res => {\n        this.totalCount = res.length\n        this.productArr = res\n      })\n    },\n    itemChange (...result) {\n      getDefaultProduct(result[0]).then(res => {\n        let resultData = result[0]\n        this.$refs.createEditDialog.open(res, resultData)\n      })\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageIndex = pageIndex\n      this.getContent(pageIndex)\n    },\n    getPageData (result) {\n      let { data, code, dataResource } = result\n      defaultProductAndDetailAddAndUpdate(data.codes, dataResource)\n        .then(res => {\n          if (code) {\n            this.$message.success(this.$t('productUpdate'))\n            this.getContent(this.pageIndex)\n          } else {\n            this.$message.success(this.$t('productCreate'))\n            this.pageIndex = 1\n            this.getContent(1)\n          }\n        })\n        .catch(err => {\n          this.$message.error(err.body.message)\n        })\n    }\n  }\n}\n</script>\n<style lang=\"less\">\n  .hot-table.el-table div.cell {\n    white-space: nowrap;\n  }\n\n</style>\n"]}]}