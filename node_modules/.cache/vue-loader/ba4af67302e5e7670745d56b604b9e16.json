{"remainingRequest":"/Users/shizhonghua/workspace/sell/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shizhonghua/workspace/sell/src/views/sys/scenario/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shizhonghua/workspace/sell/src/views/sys/scenario/index.vue","mtime":1561374112000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shizhonghua/workspace/sell/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport createEditDialog from './createEditDialog'\nimport { getScenarioPage, deleteScenario, saveAndUpdateScenario, getScenario } from '@/http/api/scenarioApi'\nexport default {\n  name: 'Platform',\n  components: {\n    createEditDialog\n  },\n\n  data () {\n    return {\n      index: 0,\n      pageIndex: 1,\n      pageSize: 10,\n      totalCount: 0,\n      contents: []\n    }\n  },\n  computed: {},\n  mounted () {\n    this.getContent(1)\n  },\n  methods: {\n    getContent (pageIndex, pageSize = 10) {\n      getScenarioPage({ pageIndex, pageSize }).then(res => {\n        this.totalCount = res.totalCount\n        this.contents = res.contents\n      })\n    },\n    itemChange (...result) {\n      if (result[2]) {\n        this.index = result[1]\n        let id = result[0].id\n        getScenario(id).then(res => {\n          this.$refs.scenarioCreateEditDialog.open(res)\n        })\n      } else {\n        this.$confirm(`${this.$t('ConfirmDelete')} \"${result[0].scenarioName}\"`)\n          .then(() => {\n            deleteScenario(result[0].id).then(() => {\n              this.$message.success(this.$t('ScenarioDelSuccessful'))\n              this.getContent(this.pageIndex)\n            })\n          })\n          .catch(() => {\n            this.$message({\n              type: 'info',\n              message: this.$t('CancelDelete')\n            })\n          })\n      }\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageIndex = pageIndex\n      this.getContent(pageIndex)\n    },\n    getPageData (result) {\n      let { data, code } = result\n      saveAndUpdateScenario(data)\n        .then(() => {\n          if (code) {\n            this.$message.success(this.$t('ScenarioUpdate'))\n            this.getContent(this.pageIndex)\n          } else {\n            this.$message.success(this.$t('ScenarioCreate'))\n            this.pageIndex = 1\n            this.getContent(1)\n          }\n        })\n        .catch(err => {\n          this.$message.error(err.body.message)\n        })\n    }\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/sys/scenario","sourcesContent":["<template>\n  <div class=\"content-wrapper\">\n    <el-card>\n      <el-button type=\"primary\" size=\"medium\" @click=\"$refs.scenarioCreateEditDialog.open()\">\n        {{ $t('create') }}\n        <i class=\"el-icon-plus el-icon--right\" />\n      </el-button>\n    </el-card>\n    <el-table :data=\"contents\" class=\"hot-table\">\n      <el-table-column :label=\"$t('sceneName')\" prop=\"scenarioName\" />\n      <el-table-column :label=\"$t('sceneDes')\" prop=\"scenarioDesc\" />\n      <el-table-column :label=\"$t('action')\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"primary\" icon=\"el-icon-edit\" circle\n            @click=\"itemChange(scope.row, scope.$index, true)\" />\n          <el-button type=\"danger\" icon=\"el-icon-delete\" circle\n            @click=\"itemChange(scope.row, scope.$index, false)\" />\n        </template>\n      </el-table-column>\n    </el-table>\n    <div class=\"block\">\n      <el-pagination :current-page=\"pageIndex\" :page-size=\"pageSize\" :total=\"totalCount\"\n        layout=\"total,prev, pager, next, jumper\" @current-change=\"handleCurrentChange\" />\n    </div>\n    <create-edit-dialog ref=\"scenarioCreateEditDialog\" @success=\"getPageData\" />\n  </div>\n</template>\n<script>\nimport createEditDialog from './createEditDialog'\nimport { getScenarioPage, deleteScenario, saveAndUpdateScenario, getScenario } from '@/http/api/scenarioApi'\nexport default {\n  name: 'Platform',\n  components: {\n    createEditDialog\n  },\n\n  data () {\n    return {\n      index: 0,\n      pageIndex: 1,\n      pageSize: 10,\n      totalCount: 0,\n      contents: []\n    }\n  },\n  computed: {},\n  mounted () {\n    this.getContent(1)\n  },\n  methods: {\n    getContent (pageIndex, pageSize = 10) {\n      getScenarioPage({ pageIndex, pageSize }).then(res => {\n        this.totalCount = res.totalCount\n        this.contents = res.contents\n      })\n    },\n    itemChange (...result) {\n      if (result[2]) {\n        this.index = result[1]\n        let id = result[0].id\n        getScenario(id).then(res => {\n          this.$refs.scenarioCreateEditDialog.open(res)\n        })\n      } else {\n        this.$confirm(`${this.$t('ConfirmDelete')} \"${result[0].scenarioName}\"`)\n          .then(() => {\n            deleteScenario(result[0].id).then(() => {\n              this.$message.success(this.$t('ScenarioDelSuccessful'))\n              this.getContent(this.pageIndex)\n            })\n          })\n          .catch(() => {\n            this.$message({\n              type: 'info',\n              message: this.$t('CancelDelete')\n            })\n          })\n      }\n    },\n    handleCurrentChange (pageIndex) {\n      this.pageIndex = pageIndex\n      this.getContent(pageIndex)\n    },\n    getPageData (result) {\n      let { data, code } = result\n      saveAndUpdateScenario(data)\n        .then(() => {\n          if (code) {\n            this.$message.success(this.$t('ScenarioUpdate'))\n            this.getContent(this.pageIndex)\n          } else {\n            this.$message.success(this.$t('ScenarioCreate'))\n            this.pageIndex = 1\n            this.getContent(1)\n          }\n        })\n        .catch(err => {\n          this.$message.error(err.body.message)\n        })\n    }\n  }\n}\n</script>\n"]}]}